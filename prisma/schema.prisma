generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Empresa {
  id             String        @id @db.VarChar(255)
  cnpj           String        @db.VarChar(255) @unique
  nome_fantasia  String        @db.VarChar(255)
  razao_socia    String        @db.VarChar(255)
  funcionario    Funcionario[]
  produto        Produto[]
  proprietarioId String        @db.VarChar(255)
  Proprietario   Proprietario @relation(fields: [proprietarioId], references: [id])
}

model Endereco {
  id     Int     @id @default(autoincrement())
  cep    String  @db.VarChar(255)
  uf     String  @db.Char(2)
  cidade String  @db.VarChar(255)
  bairro String  @db.VarChar(255)
  rua    String  @db.VarChar(255)
  num    String  @db.VarChar(255)
  refer  String? @db.VarChar(255)
}

model Funcionario {
  id        String    @id @db.VarChar(255)
  nome      String    @db.VarChar(255)
  sobrenome String    @db.VarChar(255)
  email     String    @db.VarChar(255)
  senha     String    @db.VarChar(255)
  Produto   Produto[]
  Empresa   Empresa?  @relation(fields: [empresaId], references: [id])
  empresaId String?   @db.VarChar(255)
}

model Produto {
  id             String        @id @db.VarChar(255)
  nome           String        @db.VarChar(255)
  descricao      String        @db.Text
  ncm            String        @db.VarChar(255)
  empresaId      String?
  empresa        Empresa?      @relation(fields: [empresaId], references: [id])
  proprietarioId String?
  proprietario   Proprietario? @relation(fields: [proprietarioId], references: [id])
  funcionarioId  String?
  funcionario    Funcionario?  @relation(fields: [funcionarioId], references: [id])
}

model Proprietario {
  id            String    @id @db.VarChar(255)
  nome          String?   @db.VarChar(255)
  sobrenome     String?   @db.VarChar(255)
  email         String?   @unique @db.VarChar(255)
  senha         String?   @db.VarChar(255)
  data_cadastro DateTime  @default(now()) @db.Timestamp(0)
  cpf           String?   @db.VarChar(255) @unique
  empresa       Empresa[]
  produto       Produto[]
}
