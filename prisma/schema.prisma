generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Empresa {
  id             String        @id @db.VarChar(255)
  cnpj           String        @unique @db.VarChar(255)
  nome_fantasia  String        @db.VarChar(255)
  razao_social   String        @db.VarChar(255)
  proprietarioId String        @db.VarChar(255)
  Proprietario   Proprietario  @relation(fields: [proprietarioId], references: [id])
  colaborador    Colaborador[]
  produto        Produto[]

  @@index([proprietarioId], map: "Empresa_proprietarioId_fkey")
}

model Endereco {
  id     Int     @id @default(autoincrement())
  cep    String  @db.VarChar(255)
  uf     String  @db.Char(2)
  cidade String  @db.VarChar(255)
  bairro String  @db.VarChar(255)
  rua    String  @db.VarChar(255)
  num    String  @db.VarChar(255)
  refer  String? @db.VarChar(255)
}

model Colaborador {
  id        String    @id @db.VarChar(255)
  nome      String    @db.VarChar(255)
  sobrenome String    @db.VarChar(255)
  email     String    @db.VarChar(255)
  senha     String    @db.VarChar(255)
  empresaId String?   @db.VarChar(255)
  Empresa   Empresa?  @relation(fields: [empresaId], references: [id])
  Produto   Produto[]

  @@index([empresaId], map: "Colaborador_empresaId_fkey")
}

model Produto {
  id             String        @id @db.VarChar(255)
  nome           String        @db.VarChar(255)
  descricao      String        @db.Text
  ncm            String        @db.VarChar(255)
  empresaId      String?
  proprietarioId String?
  colaboradorId  String?
  empresa        Empresa?      @relation(fields: [empresaId], references: [id])
  colaborador    Colaborador?  @relation(fields: [colaboradorId], references: [id])
  proprietario   Proprietario? @relation(fields: [proprietarioId], references: [id])

  @@index([empresaId], map: "Produto_empresaId_fkey")
  @@index([colaboradorId], map: "Produto_colaboradorId_fkey")
  @@index([proprietarioId], map: "Produto_proprietarioId_fkey")
}

model Proprietario {
  id            String    @id @db.VarChar(255)
  nome          String    @db.VarChar(255)
  sobrenome     String    @db.VarChar(255)
  email         String    @unique @db.VarChar(255)
  senha         String    @db.VarChar(255)
  data_cadastro DateTime  @default(now()) @db.Timestamp(0)
  cpf           String    @unique @db.VarChar(255)
  empresa       Empresa[]
  produto       Produto[]
}
