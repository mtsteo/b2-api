generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}


model Empresa {
  id             String        @id @db.VarChar(255)
  cnpj           String        @db.VarChar(255)
  nome_fantasia  String        @db.VarChar(255)
  razao_socia    String        @db.VarChar(255)
  produto        Produto[]     @relation("empresa_produto")
  proprietarioId String        @db.VarChar(255)
  Proprietario   Proprietario? @relation("proprietario_empresa", fields: [proprietarioId], references: [id])
}

model Endereco {
  id     Int     @id @default(autoincrement())
  cep    String  @db.VarChar(255)
  uf     String  @db.Char(2)
  cidade String  @db.VarChar(255)
  bairro String  @db.VarChar(255)
  rua    String  @db.VarChar(255)
  num    String  @db.VarChar(255)
  refer  String? @db.VarChar(255)
}

model Funcionario {
  id        String    @id @db.VarChar(255)
  nome      String    @db.VarChar(255)
  sobrenome String    @db.VarChar(255)
  email     String    @db.VarChar(255)
  senha     String    @db.VarChar(255)
  Produto   Produto[] @relation("funcionario_produto")
}

model Produto {
  id             String       @id @db.VarChar(255)
  nome           String       @db.VarChar(255)
  descricao      String       @db.Text
  ncm            String       @db.VarChar(255)
  empresaId      String
  empresa        Empresa      @relation("empresa_produto", fields: [empresaId], references: [id])
  proprietarioId String
  proprietario   Proprietario @relation("proprietario_produto", fields: [proprietarioId], references: [id])
  funcionarioId  String
  funcionario    Funcionario  @relation("funcionario_produto", fields: [funcionarioId], references: [id])
}

model Proprietario {
  id            String    @id @db.VarChar(255)
  nome          String?   @db.VarChar(255)
  sobrenome     String?   @db.VarChar(255)
  email         String?   @unique @db.VarChar(255)
  senha         String?   @db.VarChar(255)
  data_cadastro DateTime  @default(now()) @db.Timestamp(0)
  cpf           String?   @db.VarChar(255)
  empresa       Empresa[] @relation("proprietario_empresa")
  produto       Produto[] @relation("proprietario_produto")
}
